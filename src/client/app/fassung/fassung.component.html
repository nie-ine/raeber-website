<div id="rae-fassung-view">
  <div class="rt-container">
    <div id="rt-main" class="mb9-sa3">
      <div class="rt-container">
        <div [ngClass]="{'rt-grid-9': show_register, 'rt-grid-12': !show_register}">
          <div class="rt-block">
            <div id="rt-mainbody">
              <div class="component-content">

                <div id="rae-toolbar">
                  <rae-fassung-werkzeugleiste
                    (goToOtherFassung)="goToOtherFassung($event)"
                    [idOfPrev]="prevPoem.split('###')[0]"
                    [idOfNext]="nextPoem.split('###')[0]"
                    [(showRegister)]="show_register"
                    [(poemResizable)]="poem_resizable"
                  (showEditedTextChange)="zeigeKonstituiert=true"
                    (showTranscriptionChange)="zeigeDiplomatisch=false"></rae-fassung-werkzeugleiste>
                </div>

                <div id="k2Container" class="itemView">

                  <div class="itemTagsBlock" style='float:right'>
                    <ul class="itemTags">
                      <a [routerLink]="['/synopsen/' + synopseIRI.split('/')[4]]" routerLinkActive="active"
                         *ngIf="synopseIRI !== undefined">
                        Synopse
                      </a>
                    </ul>
                  </div>

                  <div class="itemHeader">
                    <!-- Date created -->
                    <span class="itemDateCreated">{{ creationDate }}</span>
                    <!-- Item title -->
                    <h2 class="itemTitle">{{ poemTitle }}</h2>
                  </div>

                  <div class="itemBody">

                    <!-- Item text -->
                    <div class="itemFullText">

                      <md-card>
                        <md-card-content
                          *ngIf="zeigeKonstituiert"
                          [ngClass]="{'rae-fassung-resizable': poem_resizable, 'rae-fassung-nonresizable': !poem_resizable}">
                          <section class="edtext edtext_hs">
                            <div [innerHTML]="editedPoemText"></div>
                          </section>
                        </md-card-content>
                        <md-card-footer>
                          <button md-button (click)="zeigeKonstituiert = !zeigeKonstituiert">
                            <md-icon *ngIf="zeigeKonstituiert">expand_less</md-icon>
                            <md-icon *ngIf="!zeigeKonstituiert">expand_more</md-icon>
                            <span *ngIf="zeigeKonstituiert">Text verbergen</span>
                            <span *ngIf="!zeigeKonstituiert">Text anzeigen</span>
                          </button>
                        </md-card-footer>
                      </md-card>

                      <md-card *ngIf="konvolutType === 'PoemManuscriptConvolute' || konvolutType === 'PoemNotebook'">
                        <md-card-content *ngIf="zeigeDiplomatisch">
                          <rae-fassung-diplomatisch [diplomaticIRIs]="diplomaticIRIs"
                                                    (pictureReduced)="show_register = true;"
                                                    (pictureIncreased)="show_register = false;">
                          </rae-fassung-diplomatisch>
                        </md-card-content>
                        <md-card-footer>
                          <button md-button (click)="zeigeDiplomatisch = !zeigeDiplomatisch">
                            <md-icon *ngIf="zeigeDiplomatisch">expand_less</md-icon>
                            <md-icon *ngIf="!zeigeDiplomatisch">expand_more</md-icon>
                            <span *ngIf="zeigeDiplomatisch">Diplomatischen Text verbergen</span>
                            <span *ngIf="!zeigeDiplomatisch">Diplomatischen Text anzeigen</span>
                          </button>
                        </md-card-footer>
                      </md-card>
                    </div>
                    <div style="margin-top:20px;">
                      <rae-fassung-steckbrief [fassungIRI]="urlPrefix + poem_id" [konvolutIRI]="konvolutIRI">
                      </rae-fassung-steckbrief>
                    </div>
                  </div>
                </div>

                <div class="itemLinks">
                  <!-- Item tags -->
                  <div class="itemTagsBlock">
                    <span>Synopse:</span>
                    <a [routerLink]="['/synopsen/' + synopseIRI.split('/')[4]]" routerLinkActive="active"
                       *ngIf="synopseIRI !== undefined">
                      {{workTitle}}
                    </a>
                  </div>
                </div>

                <!-- Related items by tag -->
                <div class="itemRelated">
                  <rae-fassung-weitere
                    (goOtherFassung)="goToOtherFassung($event)"
                    [synopsenTags]="otherWorkExpressions"></rae-fassung-weitere>
                </div>

                <div class="itemToolbar">
                  <ul>
                    <rae-fassung-blaettern
                      (goToOtherFassung)="goToOtherFassung($event)"
                      style="font-size: 0.8em; float: left"
                      [idOfPrev]="prevPoem.split('###')[0]"
                      [titleOfPrev]="prevPoem.split('###')[1]"
                      [idOfNext]="nextPoem.split('###')[0]"
                      [titleOfNext]="nextPoem.split('###')[1]"></rae-fassung-blaettern>
                    <span style='font-size:0.8em;'>Ã„nderung: {{ modificationDate }}</span>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="rt-grid-3 " *ngIf="show_register">
        <div id="rt-sidebar-a" style="margin-top:4px;">
          <ngb-accordion #acc="ngbAccordion" activeIds="register,suche">
            <ngb-panel id="register" title="Register">
              <ng-template ngbPanelContent>
                <rae-registerspalte [konvolutIRI]="konvolutIRI"></rae-registerspalte>
              </ng-template>
            </ngb-panel>
            <ngb-panel id="suche" title="Suche in {{konvolutTitle}}">
              <ng-template ngbPanelContent>
                <rae-konvolutsuche (suche)="searchInConvolute($event)"></rae-konvolutsuche>
              </ng-template>
            </ngb-panel>
          </ngb-accordion>
        </div>
      </div>
    </div>
  </div>
</div>
